import React, { PropTypes } from 'react';
import { VegaLite } from 'react-vega';
import BarChart from "./BarChart.js";
import { Handler } from 'vega-tooltip';
import vegaEmbed from 'vega-embed';


const vgEmbedOptions = { actions: false, renderer: 'svg', tooltip: true };


export default class DatavisView extends React.Component {
    constructor(props, context) {
      super(props, context);
    }

    componentDidUpdate() {
        // histograms for attributes
    //     const spec = {
    //         $schema: 'https://vega.github.io/schema/vega-lite/3.0.0-rc6.json',
    //         "width": 250,
    //         "height": 200,
    //         "width": 250,
    //         "height": 200,
    //         "mark": {"type": "point", "tooltip": true},
    //         "encoding": {
    //           "y": {"field": "pca_1", "type": "quantitative"},
    //           "x": {"field": "pca_0", "type": "quantitative"},
    //           "tooltip": { "field": "review", "type": "nominal" },
      
    //           "color": {
    //             "field": "review-sentiment",
    //             "type": "quantitative",
    //             "scale": {"range": ["crimson", "royalblue"]}
    //           }
    //         },
    //       "data": {"values": [
    //       {"topword":"bad","score":0.8083389526839617,"order":1,"pca_0":0.4858461061574096,"pca_1":-0.003487509727521204,"review-sentiment":0.6361,"review":"we stayed here for 8 nights on our trip to san francisco from australia and we absolutely loved it"},{"topword":"biggy","score":0.8083389526839617,"order":2,"pca_0":-0.061537270023050886,"pca_1":-0.1400187474561074,"review-sentiment":0.7717,"review":"from our arrival and check in to check out service was faultless and facilities were wonderful"},{"topword":"new","score":0.7144621463584777,"order":3,"pca_0":0.0013549537714021014,"pca_1":-0.2219590884179546,"review-sentiment":0,"review":"we got a 2 bedroom apartment with 2 bathrooms and a fully equipped kitchen"},{"topword":"recommendation","score":0.6152190492710732,"order":4,"pca_0":-0.18291993672545795,"pca_1":-0.2919802543833684,"review-sentiment":0.4754,"review":"all appliances were state of the art and our room also had a bosch washer and a separate dryer which was really helpful"},{"topword":"strong","score":0.6152190492710732,"order":5,"pca_0":-0.22170557560257276,"pca_1":-0.20468125755185443,"review-sentiment":0.2732,"review":"the apartment itself was very spacious with large windows automatic blinds 3 large high def lcd screens cable tv with 100 's of channels dvd players as well as a gas heater in the living area"},{"topword":"comfy","score":0.5994684609546195,"order":6,"pca_0":0.5684324285128942,"pca_1":0.025769123341824577,"review-sentiment":0.5994,"review":"we loved it so much we wished that we lived at fairmong heritage place ghirardelli square"},{"topword":"2","score":0.5979357573130499,"order":7,"pca_0":-0.14407444001429195,"pca_1":-0.13671229114525757,"review-sentiment":0.5574,"review":"also downstairs there are 3 or 4 ghirardelli chocolate cafe 's and shops which were fantastic"},{"topword":"an","score":0.5959208242972732,"order":8,"pca_0":-0.04876040306271105,"pca_1":-0.20642522546392986,"review-sentiment":0.2732,"review":"there are several restaurants as well as specialty shops at the square and it 's only a short walk from the fisherman 's wharf itself"},{"topword":"check","score":0.5773863810356084,"order":9,"pca_0":0.030551907304667836,"pca_1":-0.10110072113329531,"review-sentiment":0.5574,"review":"staff were fantastic with the concierge doing everything he could to accommodate to our requests from in room dining to arranging a in residence masseuse for my wife"},{"topword":"decor","score":0.5662307137701766,"order":10,"pca_0":0.07196402899601574,"pca_1":-0.2499622236258983,"review-sentiment":0.7397,"review":"the maserati town car was absolutely fantastic as well as it took us to union square shopping areas or other restaurants that are a just a bit too far to walk to"},{"topword":"stylish","score":0.5662307137701766,"order":11,"pca_0":-0.18314737636012532,"pca_1":-0.22045296625127658,"review-sentiment":0.2732,"review":"there 's a guest lounge area as well with a high quality pool table and daily breakfast in the morning"},{"topword":"lighting","score":0.5662307137701766,"order":12,"pca_0":0.5242646638134679,"pca_1":0.03804543755611793,"review-sentiment":0.5994,"review":"we loved it and so will you"},{"topword":"regret","score":0.5429497078047782,"order":13,"pca_0":-0.03550042447053576,"pca_1":0.16312327838416493,"review-sentiment":0,"review":"unsold timeshares being rented by the night at this point"},{"topword":"wo","score":0.5429497078047782,"order":14,"pca_0":-0.19814410928971302,"pca_1":-0.10579949728702968,"review-sentiment":0.872,"review":"best points huge space 12 ceilings full dining room well stocked kitchen including wine cooler and dishwasher living room with fireplace huge terrace enormous marble amp glass bath and ample bedroom bosch washer dryer"},{"topword":"steps","score":0.5420934735209034,"order":15,"pca_0":-0.0981921492133921,"pca_1":0.04999876212807569,"review-sentiment":0,"review":"stylish decor and lighting"},{"topword":"day","score":0.5402904002405575,"order":16,"pca_0":-0.12769051205421414,"pca_1":0.17905967949773827,"review-sentiment":0.4215,"review":"nice staff albeit young and not always practiced"},{"topword":"class","score":0.5166579001932944,"order":17,"pca_0":-0.018227989164660216,"pca_1":0.01738027910677281,"review-sentiment":0.296,"review":"very convenient location next door to gary danko walking distance to fisherman 's wharf and cable cars right on bus line n. point st. to gg park"},{"topword":"impeccable","score":0.5150451351909454,"order":18,"pca_0":-0.04245903168933845,"pca_1":-0.01269578452350811,"review-sentiment":0.4404,"review":"could be better not exactly soundproof as evidenced by the small child upstairs who lets a little kid stay up until 1am"},{"topword":"first","score":0.5150451351909454,"order":19,"pca_0":0.019142214025168722,"pca_1":-0.16684114064431824,"review-sentiment":0.5423,"review":"if you want a foam pillow or other housekeeping service ask them directly seems to be a communications gap with the friendly kids at the front desk"},{"topword":"nice","score":0.4970587060046731,"order":20,"pca_0":0.021685585008528064,"pca_1":-0.002879723411028645,"review-sentiment":0.2263,"review":"if you pay the hefty extra for a quot bay view&quot room be sure to get the 3rd or 4th floor otherwise your bay quot view&quot is between the other buildings in ghirardelli square and the people in those buildings look right back into your bedroom"},{"topword":"everyone","score":0.49388337256202886,"order":21,"pca_0":0.043109448262414723,"pca_1":-0.10417040718697998,"review-sentiment":0.7684,"review":"overall not really a fairmont but still a great place for a break especially if you prefer self catering"},{"topword":"attentive","score":0.49388337256202886,"order":22,"pca_0":-0.021438190468842783,"pca_1":0.16716614328774124,"review-sentiment":0,"review":"stayed two nights in bay facing two bed appartment"},{"topword":"down","score":0.4429898202040712,"order":23,"pca_0":-0.14192507645018124,"pca_1":-0.0834039108559416,"review-sentiment":0.4767,"review":"terrific views modern state of the art fixtures and fittings"},{"topword":"dvds","score":0.4429898202040712,"order":24,"pca_0":0.027832749292309316,"pca_1":0.09439647636984706,"review-sentiment":0.8674,"review":"ghirardelli is busy during day but quiet at night however you can buy a one day pass for the trams and go to the terminus two blocks away getting on and off all day great fun"},{"topword":"watch","score":0.4429898202040712,"order":25,"pca_0":-0.09021791742016516,"pca_1":0.14797499473941614,"review-sentiment":0.2449,"review":"the block is really time share oops shared ownership and"},{"topword":"rooms","score":0.43345470137333514,"order":26,"pca_0":0.05522746788913672,"pca_1":0.14625887362983211,"review-sentiment":0.9371,"review":"so when enough sold will cease to be hotel as well so stay whilst you can enjoyed 4 p. m. cheese and biscuits but this is mainly for time share sales but free for guests as is pleasant complimenrary breakfast"},{"topword":"while","score":0.4283819569195216,"order":27,"pca_0":0.23484390281857798,"pca_1":-0.11643926175040754,"review-sentiment":0.2263,"review":"we just got back from our trip and miss the comfort of the fairmont heritage place ghirardelli square"},{"topword":"attended","score":0.4283819569195216,"order":28,"pca_0":-0.15106420224608988,"pca_1":0.443350296924553,"review-sentiment":0,"review":"this is the most high tech hotel room i 've ever seen"},{"topword":"toured","score":0.4283819569195216,"order":29,"pca_0":-0.05623419206061248,"pca_1":0.23944517420090364,"review-sentiment":0,"review":"everything is new"},{"topword":"conference","score":0.4283819569195216,"order":30,"pca_0":-0.21829610863989096,"pca_1":0.15998432783720748,"review-sentiment":0.7845,"review":"the appliances are nice and the sound tv dvd system is great"},{"topword":"anywhere","score":0.4262719619714378,"order":31,"pca_0":-0.16336231439810234,"pca_1":0.05528992045960739,"review-sentiment":0,"review":"speakers and surround sound are integrated into the room"},{"topword":"beat","score":0.4262719619714378,"order":32,"pca_0":0.29656580526371606,"pca_1":0.03203829450027471,"review-sentiment":0.3182,"review":"the staff made sure we had everything we needed"},{"topword":"world","score":0.4262719619714378,"order":33,"pca_0":0.06990498988649878,"pca_1":0.04628342651501632,"review-sentiment":0,"review":"down to dvds to watch at night"},{"topword":"family","score":0.4186882806241253,"order":34,"pca_0":-0.12030941672746207,"pca_1":-0.09721880560020174,"review-sentiment":0.7184,"review":"everyone was friendly helpful and attentive"},{"topword":"late","score":0.41270017214365834,"order":35,"pca_0":-0.11723509254721591,"pca_1":0.10498257211705814,"review-sentiment":0.8934,"review":"the location is great in a touristy but pretty safe part of town"},{"topword":"september","score":0.41270017214365834,"order":36,"pca_0":-0.16399783148710442,"pca_1":-0.12788293146323548,"review-sentiment":0.7624,"review":"our favorite thing was the linens they were very soft and comfortable"},{"topword":"surround","score":0.41230373350501515,"order":37,"pca_0":0.17916811486062395,"pca_1":0.0448060384968099,"review-sentiment":0,"review":"we experienced some street noise on the second floor but not enough to keep us awake"},{"topword":"integrated","score":0.41230373350501515,"order":38,"pca_0":0.03267970640648028,"pca_1":-0.15200105657965252,"review-sentiment":0.3153,"review":"being on a lower floor our ocean view was partially obstructed by another building but it was n't a big problem"},{"topword":"speakers","score":0.41230373350501515,"order":39,"pca_0":0.12536130413042076,"pca_1":-0.08396190546309129,"review-sentiment":0.6249,"review":"all in all we had a great stay and would definitly come back"},{"topword":"practiced","score":0.40779309459047297,"order":40,"pca_0":-0.0731012639992078,"pca_1":0.4561802739821216,"review-sentiment":0.2023,"review":"i travel frequently in north america on business and leisure and this is one ot the top properties i 've ever stayed at"},{"topword":"young","score":0.40779309459047297,"order":41,"pca_0":0.26569044695794103,"pca_1":-0.15756379185934727,"review-sentiment":0.4939,"review":"we we upgraded to a 2-br suite a friend of my wife joined us"},{"topword":"albeit","score":0.40779309459047297,"order":42,"pca_0":-0.126654392265383,"pca_1":0.09017267292776715,"review-sentiment":0,"review":"they toured while i attended a conference"},{"topword":"always","score":0.40779309459047297,"order":43,"pca_0":-0.16865504779801274,"pca_1":-0.19403191497413766,"review-sentiment":0.6808,"review":"the suite was terrific full kitchen with touches like a wine fridge each bedroom had its own full bathroom and twice daily maid service"},{"topword":"needed","score":0.4055687213539636,"order":44,"pca_0":0.03397517412857569,"pca_1":-0.06392944223263333,"review-sentiment":0.6369,"review":"from the professionalism and courtesy of the staff to the maserati quattroporte available currently to drive guests within a 2-mile radius it was definitely not your usual hotel experience"},{"topword":"made","score":0.4055687213539636,"order":45,"pca_0":-0.005073416514518804,"pca_1":0.2975451038372839,"review-sentiment":0,"review":"my husband and i stayed here in late september"},{"topword":"see","score":0.40232679141996736,"order":46,"pca_0":0.4438555360096267,"pca_1":-0.02335612057269609,"review-sentiment":0.5994,"review":"we loved the place and prefer it to all the other hotels in san francisco"},{"topword":"waking","score":0.40232679141996736,"order":47,"pca_0":0.150353987086217,"pca_1":0.0009412956150826557,"review-sentiment":0,"review":"we have tried the four seasons hated it noisy pretentious and noir.)the mandarin oriental like it a lot second choice but it is in the financial district on the top floors of a high rise office building"},{"topword":"still","score":0.397870711745345,"order":48,"pca_0":0.0725902883804634,"pca_1":-0.007788135643677119,"review-sentiment":0.3818,"review":"hard to get away from feeling like you are going to work"},{"topword":"location","score":0.39408419976133147,"order":49,"pca_0":-0.21338635916255913,"pca_1":0.28682715040483386,"review-sentiment":0.8126,"review":"the omni nice hotel nice location nice rooms"},{"topword":"two","score":0.3910394624620477,"order":50,"pca_0":-0.12836073566765682,"pca_1":-0.034569984739052824,"review-sentiment":-0.5423,"review":"bad service"},{"topword":"incredible","score":0.3907008950342316,"order":51,"pca_0":0.0031999203359854445,"pca_1":0.1693148614630768,"review-sentiment":0,"review":"the fairmont ghirardelli square is an all suites hotel that is an historic building"},{"topword":"charm","score":0.3907008950342316,"order":52,"pca_0":-0.07112158484238083,"pca_1":-0.06651105547406422,"review-sentiment":0.7783,"review":"it has great charm and large windows with incredible views"},{"topword":"has","score":0.3907008950342316,"order":53,"pca_0":-0.16187724043563295,"pca_1":0.040070565502309585,"review-sentiment":0,"review":"the rooms are extraordinary with fireplaces bay views kitchens family rooms marble baths large flat screens in the bedrooms and family rooms"},{"topword":"modern","score":0.386480986901085,"order":54,"pca_0":-0.1623536548593685,"pca_1":-0.09326954798916252,"review-sentiment":0.765,"review":"they provide a continental breakfast with fruit and berries each morning for free and cheese and wine in the afternoon also free"},{"topword":"fittings","score":0.386480986901085,"order":55,"pca_0":-0.039734434105390494,"pca_1":-0.07552091881667199,"review-sentiment":0.3612,"review":"outside there are large open terraces with gas fire pits to hang out on on beautiful days overlooking the bay and the plaza of ghirardelli square"},{"topword":"fixtures","score":0.386480986901085,"order":56,"pca_0":0.09970804320117874,"pca_1":-0.0877291364807501,"review-sentiment":-0.4404,"review":"a block and a half from gary denko 's restaurant fort mason park and on the national maritime historic park we walked all over the place"},{"topword":"ownership","score":0.38436238954931595,"order":57,"pca_0":-0.06784390144548773,"pca_1":0.16153432676495116,"review-sentiment":0.4201,"review":"i particularly like the antique four master docked in the maritime park"},{"topword":"oops","score":0.38436238954931595,"order":58,"pca_0":-0.057127772390104976,"pca_1":-0.12635667351028843,"review-sentiment":0.4767,"review":"waking up to see that every morning was terrific"},{"topword":"shared","score":0.38436238954931595,"order":59,"pca_0":-0.11903744078624452,"pca_1":0.04246481489674184,"review-sentiment":0.5563,"review":"very strong recommendation"},{"topword":"v.","score":0.3842246767462004,"order":60,"pca_0":0.05162311113681293,"pca_1":0.16751618836816837,"review-sentiment":-0.1027,"review":"hard to beat this place anywhere in the world"},{"topword":"cadillac","score":0.3842246767462004,"order":61,"pca_0":0.06916314838987461,"pca_1":0.36723597929370844,"review-sentiment":0,"review":"my husband and i tend to travel 1st class everywhere we go but this hotel is in its own class"},{"topword":"now","score":0.3842246767462004,"order":62,"pca_0":-0.10308366298663954,"pca_1":-0.1658458451470764,"review-sentiment":0,"review":"first of all the service was impeccable"},{"topword":"note","score":0.3842246767462004,"order":63,"pca_0":-0.002972940591663982,"pca_1":-0.24866526264696878,"review-sentiment":0.3612,"review":"from the concierge to housekeeping every face had a smile and a hello"},{"topword":"system","score":0.37982976656029566,"order":64,"pca_0":-0.14222428805650988,"pca_1":-0.29064030606693914,"review-sentiment":0.3182,"review":"our quot room,&quot a huge for sf upgraded 2-bedroom condo was tastefully decorated with every amenity imaginable plush robes soft slippers fully equipped kitchen and of course the decadent ghiradelli chocolates with our turndown service"},{"topword":"everything","score":0.3788399040930972,"order":65,"pca_0":0.28466994765978404,"pca_1":0.024255557711674997,"review-sentiment":-0.3865,"review":"we could n't be more pleased until we walked out the front door"},{"topword":"rented","score":0.3736489297759614,"order":66,"pca_0":-0.14583315413062292,"pca_1":0.17919856190050534,"review-sentiment":0,"review":"talk about location location location"},{"topword":"timeshares","score":0.3736489297759614,"order":67,"pca_0":-0.04278920397785533,"pca_1":-0.022488365748799147,"review-sentiment":0,"review":"everything was just steps away"},{"topword":"unsold","score":0.3736489297759614,"order":68,"pca_0":0.17527706036221202,"pca_1":0.007920251573391693,"review-sentiment":0.0772,"review":"and if it was n't the towncar is standing by to take you to wherever you want to go"},{"topword":"hotels","score":0.36490959170640874,"order":69,"pca_0":-0.0837557272156032,"pca_1":-0.033216606703675634,"review-sentiment":0,"review":"note the towncar is now a cadillac v. a maserati"},{"topword":"hello","score":0.36195819110980176,"order":70,"pca_0":-0.07439095532496132,"pca_1":0.10555541897369193,"review-sentiment":0,"review":"not biggy"},{"topword":"face","score":0.36195819110980176,"order":71,"pca_0":-0.0765169982547242,"pca_1":-0.019457242860587323,"review-sentiment":0,"review":"still plush and comfy"},{"topword":"smile","score":0.36195819110980176,"order":72,"pca_0":0.04387431614117244,"pca_1":-0.04552326754085693,"review-sentiment":-0.2732,"review":"1 have the driver drop you off on the far side of crissy field walk to the golden gate bridge and all the way back"},{"topword":"sound","score":0.3612382732168655,"order":73,"pca_0":0.19041737873668343,"pca_1":0.0344522066209728,"review-sentiment":0.3252,"review":"you wo n't regret it"},{"topword":"plush","score":0.36033838377587624,"order":74},{"topword":"part","score":0.360035110143342,"order":75},{"topword":"safe","score":0.360035110143342,"order":76},{"topword":"pretty","score":0.360035110143342,"order":77},{"topword":"touristy","score":0.360035110143342,"order":78},{"topword":"talk","score":0.3585538213342804,"order":79},{"topword":"about","score":0.3585538213342804,"order":80},{"topword":"thing","score":0.35848334086638595,"order":81},{"topword":"comfortable","score":0.35848334086638595,"order":82},{"topword":"linens","score":0.35848334086638595,"order":83},{"topword":"favorite","score":0.35848334086638595,"order":84},{"topword":"hard","score":0.35376866676109164,"order":85},{"topword":"feeling","score":0.3494819738432976,"order":86},{"topword":"going","score":0.3494819738432976,"order":87},{"topword":"work","score":0.3494819738432976,"order":88},{"topword":"definitly","score":0.34926678309121323,"order":89},{"topword":"would","score":0.34926678309121323,"order":90},{"topword":"come","score":0.34926678309121323,"order":91},{"topword":"helpful","score":0.34822507049011164,"order":92},{"topword":"particularly","score":0.3472350241008738,"order":93},{"topword":"docked","score":0.3472350241008738,"order":94},{"topword":"antique","score":0.3472350241008738,"order":95},{"topword":"master","score":0.3472350241008738,"order":96},{"topword":"seen","score":0.33919292482696545,"order":97},{"topword":"tech","score":0.33919292482696545,"order":98},{"topword":"most","score":0.33919292482696545,"order":99},{"topword":"bed","score":0.3386927952176992,"order":100},{"topword":"facing","score":0.3386927952176992,"order":101},{"topword":"appartment","score":0.3386927952176992,"order":102},{"topword":"so","score":0.3331336704613177,"order":103},{"topword":"friendly","score":0.32964481588048755,"order":104},{"topword":"pleased","score":0.3265643442319748,"order":105},{"topword":"more","score":0.3265643442319748,"order":106},{"topword":"will","score":0.32647556496264946,"order":107},{"topword":"joined","score":0.3246280451251543,"order":108},{"topword":"friend","score":0.3246280451251543,"order":109},{"topword":"2-br","score":0.3246280451251543,"order":110},{"topword":"omni","score":0.3224593048187272,"order":111},{"topword":"here","score":0.3200404922673519,"order":112},{"topword":"miss","score":0.31283094722841337,"order":113},{"topword":"comfort","score":0.31283094722841337,"order":114},{"topword":"view&quot","score":0.3115149980654644,"order":115},{"topword":"buildings","score":0.3115149980654644,"order":116},{"topword":"towncar","score":0.3062494004943283,"order":117},{"topword":"free","score":0.30605358493533374,"order":118},{"topword":"husband","score":0.30601079411024923,"order":119},{"topword":"away","score":0.303523524308189,"order":120},{"topword":"just","score":0.301163242158611,"order":121},{"topword":"street","score":0.29957199600907775,"order":122},{"topword":"noise","score":0.29957199600907775,"order":123},{"topword":"keep","score":0.29957199600907775,"order":124},{"topword":"experienced","score":0.29957199600907775,"order":125},{"topword":"awake","score":0.29957199600907775,"order":126},{"topword":"some","score":0.29957199600907775,"order":127},{"topword":"state","score":0.2992461391201692,"order":128},{"topword":"art","score":0.2992461391201692,"order":129},{"topword":"bathrooms","score":0.29896787865652497,"order":130},{"topword":"chocolate","score":0.2984320756228906,"order":131},{"topword":"cafe","score":0.2984320756228906,"order":132},{"topword":"downstairs","score":0.2984320756228906,"order":133},{"topword":"san","score":0.2982464553382732,"order":134},{"topword":"francisco","score":0.2982464553382732,"order":135},{"topword":"suites","score":0.2979604121486366,"order":136},{"topword":"loved","score":0.2976652335019278,"order":137},{"topword":"full","score":0.29695598105932475,"order":138},{"topword":"appliances","score":0.2962129693949984,"order":139},{"topword":"they","score":0.2935220461731138,"order":140},{"topword":"prefer","score":0.29090434700008655,"order":141},{"topword":"terrific","score":0.29003918595148775,"order":142},{"topword":"park","score":0.28953808879182086,"order":143},{"topword":"up","score":0.2893993173048992,"order":144},{"topword":"australia","score":0.2890936689263537,"order":145},{"topword":"8","score":0.2890936689263537,"order":146},{"topword":"faultless","score":0.2886931905178042,"order":147},{"topword":"arrival","score":0.2886931905178042,"order":148},{"topword":"wonderful","score":0.2886931905178042,"order":149},{"topword":"facilities","score":0.2886931905178042,"order":150},{"topword":"much","score":0.28817913459641037,"order":151},{"topword":"wished","score":0.28817913459641037,"order":152},{"topword":"fairmong","score":0.28817913459641037,"order":153},{"topword":"lived","score":0.28817913459641037,"order":154},{"topword":"take","score":0.287327668320068,"order":155},{"topword":"standing","score":0.287327668320068,"order":156},{"topword":"wherever","score":0.287327668320068,"order":157},{"topword":"being","score":0.2870838401293566,"order":158},{"topword":"nights","score":0.2862907555830191,"order":159},{"topword":"n't","score":0.28299504157544214,"order":160},{"topword":"night","score":0.28229963748616943,"order":161},{"topword":"block","score":0.28152233713872765,"order":162},{"topword":"pool","score":0.28136263380991655,"order":163},{"topword":"guest","score":0.28136263380991655,"order":164},{"topword":"quality","score":0.28136263380991655,"order":165},{"topword":"lounge","score":0.28136263380991655,"order":166},{"topword":"table","score":0.28136263380991655,"order":167},{"topword":"views","score":0.2794080520497963,"order":168},{"topword":"got","score":0.278999879945185,"order":169},{"topword":"service","score":0.27517726463142644,"order":170},{"topword":"i","score":0.2750488772493273,"order":171},{"topword":"very","score":0.274665665183887,"order":172},{"topword":"trip","score":0.27449692372377266,"order":173},{"topword":"heritage","score":0.2740798667477464,"order":174},{"topword":"overall","score":0.2729936861532245,"order":175},{"topword":"catering","score":0.2729936861532245,"order":176},{"topword":"self","score":0.2729936861532245,"order":177},{"topword":"break","score":0.2729936861532245,"order":178},{"topword":"especially","score":0.2729936861532245,"order":179},{"topword":"not","score":0.27261099508577297,"order":180},{"topword":"every","score":0.2704725254961346,"order":181},{"topword":"separate","score":0.26971440859618107,"order":182},{"topword":"concierge","score":0.26952049519803,"order":183},{"topword":"housekeeping","score":0.269482703385946,"order":184},{"topword":"point","score":0.26576238407447383,"order":185},{"topword":"maritime","score":0.26459106812588956,"order":186},{"topword":"morning","score":0.2643001413076507,"order":187},{"topword":"'","score":0.26415283055076877,"order":188},{"topword":"ever","score":0.26415283055076877,"order":189},{"topword":"ve","score":0.26415283055076877,"order":190},{"topword":"windows","score":0.26404897597851484,"order":191},{"topword":"really","score":0.26256880435923563,"order":192},{"topword":"town","score":0.25923111521606634,"order":193},{"topword":"which","score":0.25909301257503814,"order":194},{"topword":"dvd","score":0.2590913928469852,"order":195},{"topword":"tv","score":0.2590913928469852,"order":196},{"topword":"into","score":0.2590541350750361,"order":197},{"topword":"as","score":0.2588445534011686,"order":198},{"topword":"everywhere","score":0.2583289500966472,"order":199},{"topword":"tend","score":0.2583289500966472,"order":200},{"topword":"1st","score":0.2583289500966472,"order":201},{"topword":"we","score":0.2576726304409801,"order":202},{"topword":"stayed","score":0.256516239390581,"order":203},{"topword":"sure","score":0.25598275359787365,"order":204},{"topword":"partially","score":0.25587663258695864,"order":205},{"topword":"lower","score":0.25587663258695864,"order":206},{"topword":"view","score":0.25587663258695864,"order":207},{"topword":"big","score":0.25587663258695864,"order":208},{"topword":"another","score":0.25587663258695864,"order":209},{"topword":"problem","score":0.25587663258695864,"order":210},{"topword":"obstructed","score":0.25587663258695864,"order":211},{"topword":"ocean","score":0.25587663258695864,"order":212},{"topword":"suite","score":0.25532432292246976,"order":213},{"topword":"walked","score":0.25516457536747944,"order":214},{"topword":"until","score":0.25484921231045327,"order":215},{"topword":"staff","score":0.2538638264221355,"order":216},{"topword":"time","score":0.25378061830063403,"order":217},{"topword":"share","score":0.25378061830063403,"order":218},{"topword":"front","score":0.2533419744209493,"order":219},{"topword":"wife","score":0.2524967517591833,"order":220},{"topword":"huge","score":0.2517394028833364,"order":221},{"topword":"soft","score":0.25044144261071277,"order":222},{"topword":"fairmont","score":0.2503093202141942,"order":223},{"topword":"berries","score":0.24949401444130992,"order":224},{"topword":"fruit","score":0.24949401444130992,"order":225},{"topword":"provide","score":0.24949401444130992,"order":226},{"topword":"continental","score":0.24949401444130992,"order":227},{"topword":"afternoon","score":0.24949401444130992,"order":228},{"topword":"had","score":0.24707121210511934,"order":229},{"topword":"shops","score":0.24578789547538327,"order":230},{"topword":"my","score":0.2453335295320276,"order":231},{"topword":"four","score":0.2452066418825722,"order":232},{"topword":"your","score":0.2446127731418282,"order":233},{"topword":"door","score":0.24429030345215558,"order":234},{"topword":"large","score":0.24285064855328475,"order":235},{"topword":"historic","score":0.24212026524532754,"order":236},{"topword":"out","score":0.24099624468306105,"order":237},{"topword":"only","score":0.24053857159786496,"order":238},{"topword":"several","score":0.24053857159786496,"order":239},{"topword":"specialty","score":0.24053857159786496,"order":240},{"topword":"short","score":0.24053857159786496,"order":241},{"topword":"ot","score":0.24004887132324992,"order":242},{"topword":"properties","score":0.24004887132324992,"order":243},{"topword":"leisure","score":0.24004887132324992,"order":244},{"topword":"business","score":0.24004887132324992,"order":245},{"topword":"frequently","score":0.24004887132324992,"order":246},{"topword":"north","score":0.24004887132324992,"order":247},{"topword":"america","score":0.24004887132324992,"order":248},{"topword":"that","score":0.23975851918956734,"order":249},{"topword":"way","score":0.23918575400461697,"order":250},{"topword":"field","score":0.23918575400461697,"order":251},{"topword":"drop","score":0.23918575400461697,"order":252},{"topword":"driver","score":0.23918575400461697,"order":253},{"topword":"golden","score":0.23918575400461697,"order":254},{"topword":"bridge","score":0.23918575400461697,"order":255},{"topword":"gate","score":0.23918575400461697,"order":256},{"topword":"side","score":0.23918575400461697,"order":257},{"topword":"crissy","score":0.23918575400461697,"order":258},{"topword":"us","score":0.235816512305718,"order":259},{"topword":"all","score":0.235696675727174,"order":260},{"topword":"plaza","score":0.23564516794457463,"order":261},{"topword":"pits","score":0.23564516794457463,"order":262},{"topword":"overlooking","score":0.23564516794457463,"order":263},{"topword":"outside","score":0.23564516794457463,"order":264},{"topword":"open","score":0.23564516794457463,"order":265},{"topword":"fire","score":0.23564516794457463,"order":266},{"topword":"hang","score":0.23564516794457463,"order":267},{"topword":"terraces","score":0.23564516794457463,"order":268},{"topword":"beautiful","score":0.23564516794457463,"order":269},{"topword":"days","score":0.23564516794457463,"order":270},{"topword":"daily","score":0.23559390819787435,"order":271},{"topword":"want","score":0.2354487922085844,"order":272},{"topword":"fridge","score":0.2352543498583984,"order":273},{"topword":"touches","score":0.2352543498583984,"order":274},{"topword":"bathroom","score":0.2352543498583984,"order":275},{"topword":"twice","score":0.2352543498583984,"order":276},{"topword":"maid","score":0.2352543498583984,"order":277},{"topword":"upgraded","score":0.2350023422926471,"order":278},{"topword":"great","score":0.23462627868532238,"order":279},{"topword":"over","score":0.23296775179589294,"order":280},{"topword":"restaurant","score":0.23296775179589294,"order":281},{"topword":"half","score":0.23296775179589294,"order":282},{"topword":"mason","score":0.23296775179589294,"order":283},{"topword":"national","score":0.23296775179589294,"order":284},{"topword":"denko","score":0.23296775179589294,"order":285},{"topword":"fort","score":0.23296775179589294,"order":286},{"topword":"little","score":0.23227621476708124,"order":287},{"topword":"who","score":0.23227621476708124,"order":288},{"topword":"am","score":0.23227621476708124,"order":289},{"topword":"evidenced","score":0.23227621476708124,"order":290},{"topword":"exactly","score":0.23227621476708124,"order":291},{"topword":"upstairs","score":0.23227621476708124,"order":292},{"topword":"better","score":0.23227621476708124,"order":293},{"topword":"soundproof","score":0.23227621476708124,"order":294},{"topword":"lets","score":0.23227621476708124,"order":295},{"topword":"kid","score":0.23227621476708124,"order":296},{"topword":"child","score":0.23227621476708124,"order":297},{"topword":"small","score":0.23227621476708124,"order":298},{"topword":"also","score":0.23157558326467975,"order":299},{"topword":"maserati","score":0.23154080197570573,"order":300},{"topword":"place","score":0.2304057546721032,"order":301},{"topword":"get","score":0.23040539849367359,"order":302},{"topword":"by","score":0.23019304202643756,"order":303},{"topword":"residence","score":0.2290539718577174,"order":304},{"topword":"requests","score":0.2290539718577174,"order":305},{"topword":"accommodate","score":0.2290539718577174,"order":306},{"topword":"masseuse","score":0.2290539718577174,"order":307},{"topword":"doing","score":0.2290539718577174,"order":308},{"topword":"arranging","score":0.2290539718577174,"order":309},{"topword":"he","score":0.2290539718577174,"order":310},{"topword":"quot","score":0.22902237240617807,"order":311},{"topword":"pillow","score":0.22897110090355918,"order":312},{"topword":"ask","score":0.22897110090355918,"order":313},{"topword":"directly","score":0.22897110090355918,"order":314},{"topword":"kids","score":0.22897110090355918,"order":315},{"topword":"desk","score":0.22897110090355918,"order":316},{"topword":"them","score":0.22897110090355918,"order":317},{"topword":"gap","score":0.22897110090355918,"order":318},{"topword":"seems","score":0.22897110090355918,"order":319},{"topword":"foam","score":0.22897110090355918,"order":320},{"topword":"communications","score":0.22897110090355918,"order":321},{"topword":"travel","score":0.22727626543311627,"order":322},{"topword":"absolutely","score":0.22687954351429168,"order":323},{"topword":"own","score":0.22508980992439034,"order":324},{"topword":"its","score":0.22508980992439034,"order":325},{"topword":"radius","score":0.22487880767392054,"order":326},{"topword":"definitely","score":0.22487880767392054,"order":327},{"topword":"experience","score":0.22487880767392054,"order":328},{"topword":"professionalism","score":0.22487880767392054,"order":329},{"topword":"quattroporte","score":0.22487880767392054,"order":330},{"topword":"drive","score":0.22487880767392054,"order":331},{"topword":"within","score":0.22487880767392054,"order":332},{"topword":"currently","score":0.22487880767392054,"order":333},{"topword":"courtesy","score":0.22487880767392054,"order":334},{"topword":"2-mile","score":0.22487880767392054,"order":335},{"topword":"available","score":0.22487880767392054,"order":336},{"topword":"usual","score":0.22487880767392054,"order":337},{"topword":"like","score":0.22484509940496883,"order":338},{"topword":"second","score":0.22347077291257186,"order":339},{"topword":"fully","score":0.2233004836730827,"order":340},{"topword":"equipped","score":0.2233004836730827,"order":341},{"topword":"could","score":0.22315080507037685,"order":342},{"topword":"apartment","score":0.22221577938914572,"order":343},{"topword":"3","score":0.22197143602702493,"order":344},{"topword":"each","score":0.22106079600204895,"order":345},{"topword":"were","score":0.22004700635807276,"order":346},{"topword":"this","score":0.21966003693270575,"order":347},{"topword":"bay","score":0.21938934157521617,"order":348},{"topword":"enough","score":0.2151134803177956,"order":349},{"topword":"1","score":0.21500177365617046,"order":350},{"topword":"4","score":0.21459364007385062,"order":351},{"topword":"room","score":0.21452858363998176,"order":352},{"topword":"area","score":0.2141872232841147,"order":353},{"topword":"stay","score":0.21345983370938174,"order":354},{"topword":"back","score":0.2117459268570556,"order":355},{"topword":"there","score":0.2115330804953543,"order":356},{"topword":"building","score":0.21080323435958412,"order":357},{"topword":"kitchens","score":0.20934414031206264,"order":358},{"topword":"fireplaces","score":0.20934414031206264,"order":359},{"topword":"extraordinary","score":0.20934414031206264,"order":360},{"topword":"baths","score":0.20934414031206264,"order":361},{"topword":"flat","score":0.20934414031206264,"order":362},{"topword":"bedrooms","score":0.20934414031206264,"order":363},{"topword":"distance","score":0.20912234085358072,"order":364},{"topword":"st","score":0.20912234085358072,"order":365},{"topword":"n.","score":0.20912234085358072,"order":366},{"topword":"cars","score":0.20912234085358072,"order":367},{"topword":"walking","score":0.20912234085358072,"order":368},{"topword":"gg","score":0.20912234085358072,"order":369},{"topword":"convenient","score":0.20912234085358072,"order":370},{"topword":"danko","score":0.20912234085358072,"order":371},{"topword":"bus","score":0.20912234085358072,"order":372},{"topword":"next","score":0.20912234085358072,"order":373},{"topword":".","score":0.20912234085358072,"order":374},{"topword":"line","score":0.20912234085358072,"order":375},{"topword":"fantastic","score":0.2084247679793435,"order":376},{"topword":"areas","score":0.20841420945203606,"order":377},{"topword":"shopping","score":0.20841420945203606,"order":378},{"topword":"car","score":0.20841420945203606,"order":379},{"topword":"union","score":0.20841420945203606,"order":380},{"topword":"too","score":0.20841420945203606,"order":381},{"topword":"bit","score":0.20841420945203606,"order":382},{"topword":"took","score":0.20841420945203606,"order":383},{"topword":"it","score":0.20831461430861395,"order":384},{"topword":"go","score":0.2055509376921947,"order":385},{"topword":"you","score":0.20547110639397018,"order":386},{"topword":"bosch","score":0.20538734649174817,"order":387},{"topword":"washer","score":0.20538734649174817,"order":388},{"topword":"dryer","score":0.20538734649174817,"order":389},{"topword":"'s","score":0.2052940428214948,"order":390},{"topword":"fisherman","score":0.20505979299409477,"order":391},{"topword":"wharf","score":0.20505979299409477,"order":392},{"topword":"restaurants","score":0.20473686237105768,"order":393},{"topword":"far","score":0.2041199341748357,"order":394},{"topword":"gary","score":0.2016072564306557,"order":395},{"topword":"floor","score":0.20143079274679618,"order":396},{"topword":"our","score":0.20088780366240425,"order":397},{"topword":"high","score":0.20018524280716798,"order":398},{"topword":"at","score":0.1992607690607268,"order":399},{"topword":"breakfast","score":0.19910423244813638,"order":400},{"topword":"are","score":0.1965805320908325,"order":401},{"topword":"top","score":0.1963263196402285,"order":402},{"topword":"hotel","score":0.19603002825184368,"order":403},{"topword":"have","score":0.19593271046987928,"order":404},{"topword":"itself","score":0.19557014202449935,"order":405},{"topword":"walk","score":0.194897492092479,"order":406},{"topword":"to","score":0.19376924884634839,"order":407},{"topword":"is","score":0.19360945963650952,"order":408},{"topword":"gas","score":0.19333859306750917,"order":409},{"topword":"cheese","score":0.19227631513511495,"order":410},{"topword":"other","score":0.19191658302895048,"order":411},{"topword":"one","score":0.19159989676589134,"order":412},{"topword":"off","score":0.19120628759554212,"order":413},{"topword":"room,&quot","score":0.19069173609876286,"order":414},{"topword":"robes","score":0.19069173609876286,"order":415},{"topword":"condo","score":0.19069173609876286,"order":416},{"topword":"ghiradelli","score":0.19069173609876286,"order":417},{"topword":"slippers","score":0.19069173609876286,"order":418},{"topword":"course","score":0.19069173609876286,"order":419},{"topword":"amenity","score":0.19069173609876286,"order":420},{"topword":"imaginable","score":0.19069173609876286,"order":421},{"topword":"decadent","score":0.19069173609876286,"order":422},{"topword":"decorated","score":0.19069173609876286,"order":423},{"topword":"chocolates","score":0.19069173609876286,"order":424},{"topword":"sf","score":0.19069173609876286,"order":425},{"topword":"2-bedroom","score":0.19069173609876286,"order":426},{"topword":"turndown","score":0.19069173609876286,"order":427},{"topword":"tastefully","score":0.19069173609876286,"order":428},{"topword":"rise","score":0.19046103380574628,"order":429},{"topword":"pretentious","score":0.19046103380574628,"order":430},{"topword":"oriental","score":0.19046103380574628,"order":431},{"topword":"hated","score":0.19046103380574628,"order":432},{"topword":"office","score":0.19046103380574628,"order":433},{"topword":"financial","score":0.19046103380574628,"order":434},{"topword":"tried","score":0.19046103380574628,"order":435},{"topword":"noisy","score":0.19046103380574628,"order":436},{"topword":"noir.)the","score":0.19046103380574628,"order":437},{"topword":"choice","score":0.19046103380574628,"order":438},{"topword":"mandarin","score":0.19046103380574628,"order":439},{"topword":"lot","score":0.19046103380574628,"order":440},{"topword":"floors","score":0.19046103380574628,"order":441},{"topword":"seasons","score":0.19046103380574628,"order":442},{"topword":"district","score":0.19046103380574628,"order":443},{"topword":"was","score":0.18969065168187976,"order":444},{"topword":"if","score":0.18931193934142448,"order":445},{"topword":"wine","score":0.18846110913284084,"order":446},{"topword":"players","score":0.18831316587330113,"order":447},{"topword":"lcd","score":0.18831316587330113,"order":448},{"topword":"channels","score":0.18831316587330113,"order":449},{"topword":"automatic","score":0.18831316587330113,"order":450},{"topword":"100","score":0.18831316587330113,"order":451},{"topword":"heater","score":0.18831316587330113,"order":452},{"topword":"spacious","score":0.18831316587330113,"order":453},{"topword":"def","score":0.18831316587330113,"order":454},{"topword":"blinds","score":0.18831316587330113,"order":455},{"topword":"dining","score":0.18684488369420815,"order":456},{"topword":"from","score":0.18295308424466356,"order":457},{"topword":"but","score":0.1820638647726167,"order":458},{"topword":"kitchen","score":0.18140508460490024,"order":459},{"topword":"screens","score":0.18134448121008317,"order":460},{"topword":"cable","score":0.1812433335457364,"order":461},{"topword":"guests","score":0.18105099164255378,"order":462},{"topword":"points","score":0.18066477242698678,"order":463},{"topword":"enormous","score":0.18066477242698678,"order":464},{"topword":"ample","score":0.18066477242698678,"order":465},{"topword":"amp","score":0.18066477242698678,"order":466},{"topword":"ceilings","score":0.18066477242698678,"order":467},{"topword":"fireplace","score":0.18066477242698678,"order":468},{"topword":"best","score":0.18066477242698678,"order":469},{"topword":"stocked","score":0.18066477242698678,"order":470},{"topword":"including","score":0.18066477242698678,"order":471},{"topword":"space","score":0.18066477242698678,"order":472},{"topword":"bath","score":0.18066477242698678,"order":473},{"topword":"glass","score":0.18066477242698678,"order":474},{"topword":"cooler","score":0.18066477242698678,"order":475},{"topword":"terrace","score":0.18066477242698678,"order":476},{"topword":"12","score":0.18066477242698678,"order":477},{"topword":"dishwasher","score":0.18066477242698678,"order":478},{"topword":"a","score":0.18029538160920286,"order":479},{"topword":"pass","score":0.18009680008018583,"order":480},{"topword":"quiet","score":0.18009680008018583,"order":481},{"topword":"terminus","score":0.18009680008018583,"order":482},{"topword":"getting","score":0.18009680008018583,"order":483},{"topword":"fun","score":0.18009680008018583,"order":484},{"topword":"however","score":0.18009680008018583,"order":485},{"topword":"buy","score":0.18009680008018583,"order":486},{"topword":"trams","score":0.18009680008018583,"order":487},{"topword":"busy","score":0.18009680008018583,"order":488},{"topword":"blocks","score":0.18009680008018583,"order":489},{"topword":"during","score":0.18009680008018583,"order":490},{"topword":"or","score":0.17859983989420902,"order":491},{"topword":"marble","score":0.17785656857767718,"order":492},{"topword":"ghirardelli","score":0.17672474876241992,"order":493},{"topword":"bedroom","score":0.1744070755181583,"order":494},{"topword":"square","score":0.17376990570799994,"order":495},{"topword":"pleasant","score":0.17213492628890595,"order":496},{"topword":"p.","score":0.17213492628890595,"order":497},{"topword":"sales","score":0.17213492628890595,"order":498},{"topword":"biscuits","score":0.17213492628890595,"order":499},{"topword":"whilst","score":0.17213492628890595,"order":500},{"topword":"mainly","score":0.17213492628890595,"order":501},{"topword":"when","score":0.17213492628890595,"order":502},{"topword":"enjoyed","score":0.17213492628890595,"order":503},{"topword":"cease","score":0.17213492628890595,"order":504},{"topword":"sold","score":0.17213492628890595,"order":505},{"topword":"complimenrary","score":0.17213492628890595,"order":506},{"topword":"m.","score":0.17213492628890595,"order":507},{"topword":"of","score":0.170190881283195,"order":508},{"topword":"be","score":0.16997456070429226,"order":509},{"topword":"living","score":0.16826576994373496,"order":510},{"topword":"right","score":0.16639690567475118,"order":511},{"topword":"on","score":0.1643590997549022,"order":512},{"topword":"with","score":0.16323843855243544,"order":513},{"topword":"in","score":0.1624239849652605,"order":514},{"topword":"for","score":0.16099218841545826,"order":515},{"topword":"can","score":0.16062896039023145,"order":516},{"topword":"look","score":0.1557574990327322,"order":517},{"topword":"people","score":0.1557574990327322,"order":518},{"topword":"pay","score":0.1557574990327322,"order":519},{"topword":"otherwise","score":0.1557574990327322,"order":520},{"topword":"extra","score":0.1557574990327322,"order":521},{"topword":"between","score":0.1557574990327322,"order":522},{"topword":"3rd","score":0.1557574990327322,"order":523},{"topword":"those","score":0.1557574990327322,"order":524},{"topword":"4th","score":0.1557574990327322,"order":525},{"topword":"hefty","score":0.1557574990327322,"order":526},{"topword":"well","score":0.15433127935524424,"order":527},{"topword":"the","score":0.1412294649427363,"order":528},{"topword":"and","score":0.12309511713075401,"order":529}
    //     ]}
    //   };
        console.log(`here is the current props spec: `);
        console.log(this.props.visSpec);

        vegaEmbed(this.visRef, this.props.visSpec, vgEmbedOptions).then(({spec, view}) => {
            console.log(`view should be here!`);
            console.log(view);
            view.addEventListener('mouseover', function (event, item) {
                console.log(item.datum)
            })
        })
      }
  
    render() {
    //   const col = this.props.selectedColumn;
    //   const visType = (col == null) ? null : this.props.visTypes[col];
    //   let newSpec = Object.assign({}, this.spec);
    //   if (visType == "distribution") {
    //     newSpec.hconcat.push(this.distributionSpec);
    //   } else if (visType == "scatterplot") { 
    //     const firstRow = this.props.visualData[col][visType][0];
    //     for (let key in firstRow) {
    //         console.log(`[datavis render] vis field -> ${key} and value ${firstRow[key]}`);
    //         if (key === "review-tfidf-kmeans") {
    //             newSpec.hconcat.push(this.scatterplotClusterSpec);
    //         } else if (key == "review-sentiment") {
    //             newSpec.hconcat.push(this.scatterplotSentimentSpec);
    //         }
    //     }
    //   }
        return (
            <div className="vgl-vis" id="vgl-vis" ref={e => this.visRef = e}></div>
        );
    }
  }